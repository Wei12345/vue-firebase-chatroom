webpackJsonp([0],{541:function(e,t,n){n(544);var o=n(101)(n(542),n(545),"data-v-37e895ab",null);e.exports=o.exports},542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(272),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(102);t.default={data:function(){return{firestore:this.$_firebase.firestore(),collectionName:"messages"}},created:function(){this.firestore.settings({timestampsInSnapshots:!0}),this.getMessages()},computed:(0,s.default)({userMessage:{get:function(){return this.$store.getters.userMessage},set:function(e){this.$store.commit("setUserMessage",e)}},messages:{get:function(){return this.$store.getters.messages},set:function(e){this.$store.commit("setMessages",e)}}},(0,a.mapGetters)(["userId","username"])),methods:(0,s.default)({usernameChange:function(){this.setUsernameModalShow(!0)},getMessages:function(){var e=this;this.firestore.collection(this.collectionName).orderBy("timestamp").onSnapshot(function(t){t.hasPendingWrites||(e.messages=t.docs.map(function(t){var n=t.data(),o=n.timestamp?e.$_moment(n.timestamp.toDate()).format("MM-DD a hh:mm"):"";return(0,s.default)({id:t.id},n,{datetime:o})}),e.$nextTick(function(){document.querySelector(".chatroom-body").scrollTop=99999}))})},sendMessage:function(){this.userMessage&&(this.firestore.collection(this.collectionName).add({userId:this.userId,username:this.username,userMessage:this.userMessage,timestamp:this.$_firebase.firestore.FieldValue.serverTimestamp()}),this.userMessage="")}},(0,a.mapMutations)(["setUsernameModalShow"]))}},543:function(e,t,n){t=e.exports=n(65)(!1),t.push([e.i,"\n.chatroom-header[data-v-37e895ab] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  height: 100px;\n  padding: 0px 30px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background-color: #444956;\n}\n@media screen and (max-width: 767px) {\n.chatroom-header[data-v-37e895ab] {\n      padding: 0px 15px;\n}\n}\n.chatroom-header-id[data-v-37e895ab] {\n    font-size: 22.4px;\n    font-size: 1.4rem;\n    color: #cccccc;\n}\n.chatroom-header-username[data-v-37e895ab] {\n    font-size: 38.4px;\n    font-size: 2.4rem;\n    color: #ffffff;\n}\n.chatroom-header-change[data-v-37e895ab] {\n    cursor: pointer;\n    font-size: 19.2px;\n    font-size: 1.2rem;\n    color: #aaaaaa;\n    border: none;\n    background: none;\n}\n.chatroom-body[data-v-37e895ab] {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  height: calc(100vh - 200px);\n  padding: 5px;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n.chatroom-body-item[data-v-37e895ab] {\n    margin: 10px 0px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.chatroom-body-item-user-id[data-v-37e895ab] {\n      font-size: 19.2px;\n      font-size: 1.2rem;\n      color: #cccccc;\n}\n.chatroom-body-item-message[data-v-37e895ab] {\n      margin-top: 5px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n}\n.chatroom-body-item-message-username[data-v-37e895ab] {\n        font-size: 28.8px;\n        font-size: 1.8rem;\n}\n.chatroom-body-item-message-content[data-v-37e895ab] {\n        position: relative;\n        margin: 0px 5px 0px 20px;\n        padding: 10px;\n        max-width: 40%;\n        font-size: 38.4px;\n        font-size: 2.4rem;\n        font-weight: 400;\n        border-radius: 6px;\n        background-color: #eeeeee;\n}\n.chatroom-body-item-message-content[data-v-37e895ab]:after {\n          display: block;\n          content: '';\n          position: absolute;\n          margin: auto;\n          top: 0px;\n          bottom: 0px;\n          right: 100%;\n          width: 0px;\n          height: 0px;\n          border-top: 10px solid transparent;\n          border-bottom: 10px solid transparent;\n          border-right: 20px solid #eeeeee;\n}\n.chatroom-body-item-message-datetime[data-v-37e895ab] {\n        color: #999999;\n        font-size: 22.4px;\n        font-size: 1.4rem;\n}\n.chatroom-body-item.me[data-v-37e895ab] {\n      -webkit-box-align: end;\n          -ms-flex-align: end;\n              align-items: flex-end;\n}\n.chatroom-body-item.me .chatroom-body-item-message[data-v-37e895ab] {\n        -webkit-box-orient: horizontal;\n        -webkit-box-direction: reverse;\n            -ms-flex-direction: row-reverse;\n                flex-direction: row-reverse;\n}\n.chatroom-body-item.me .chatroom-body-item-message-content[data-v-37e895ab] {\n          margin: 0px 20px 0px 5px;\n          background-color: #bef18c;\n}\n.chatroom-body-item.me .chatroom-body-item-message-content[data-v-37e895ab]:after {\n            right: auto;\n            left: 100%;\n            border-right: none;\n            border-left: 20px solid #bef18c;\n}\n.chatroom-footer[data-v-37e895ab] {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  height: 100px;\n  border-top: 2px solid #cccccc;\n}\n.chatroom-footer-input[data-v-37e895ab] {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    padding: 10px;\n    font-size: 22.4px;\n    font-size: 1.4rem;\n    border: 0px;\n    width: 100%;\n    height: 100%;\n}\n",""])},544:function(e,t,n){var o=n(543);"string"==typeof o&&(o=[[e.i,o,""]]);n(66)(o,{});o.locals&&(e.exports=o.locals)},545:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chatroom"},[n("header",{staticClass:"chatroom-header"},[n("h4",{staticClass:"chatroom-header-id"},[e._v(e._s(e.userId))]),e._v(" "),n("h4",{staticClass:"chatroom-header-username"},[e._v(e._s(e.username)),n("button",{staticClass:"chatroom-header-change",attrs:{type:"button"},on:{click:e.usernameChange}},[e._v("變更名稱")])])]),e._v(" "),n("section",{staticClass:"chatroom-body"},e._l(e.messages,function(t){return n("div",{staticClass:"chatroom-body-item",class:{me:t.userId===e.userId}},[n("span",{staticClass:"chatroom-body-item-user-id"},[e._v(e._s(t.userId))]),e._v(" "),n("div",{staticClass:"chatroom-body-item-message"},[n("span",{staticClass:"chatroom-body-item-message-username"},[e._v(e._s(t.username))]),e._v(" "),n("p",{staticClass:"chatroom-body-item-message-content"},[e._v(e._s(t.userMessage))]),e._v(" "),n("span",{staticClass:"chatroom-body-item-message-datetime"},[e._v(e._s(t.datetime))])])])})),e._v(" "),n("footer",{staticClass:"chatroom-footer"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],staticClass:"chatroom-footer-input",attrs:{placeholder:"請輸入訊息"},domProps:{value:e.userMessage},on:{keypress:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.sendMessage(t)):null},input:function(t){t.target.composing||(e.userMessage=t.target.value)}}})])])},staticRenderFns:[]}}});